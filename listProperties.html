<!doctype html>
<html lang="id">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Agent Dashboard | Dabelyuland</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;600;700;800&display=swap" />
    <script>
      tailwind.config = {
        theme: {
          extend: {
            colors: { primary: "#0052CC", "primary-dark": "#0747A6" },
            fontFamily: { sans: ["Plus Jakarta Sans", "sans-serif"] },
          },
        },
      };
    </script>
    <style>
      .active-tab {
        border-bottom: 3px solid #0052cc;
        color: #0052cc;
      }
      .fade-in {
        animation: fadeIn 0.2s ease-in;
      }
      @keyframes fadeIn {
        from {
          opacity: 0;
          transform: translateY(5px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      /* ... kode lama Anda ... */
      .modal-backdrop {
        @apply fixed inset-0 bg-slate-900/50 backdrop-blur-sm z-50 flex items-center justify-center p-4;
      }
      .modal-content {
        @apply bg-white rounded-3xl w-full max-w-lg shadow-2xl overflow-hidden fade-in;
      }

      /* Animasi Centang */
      .checkmark-circle {
        width: 80px;
        height: 80px;
        @apply rounded-full border-4 border-green-500 flex items-center justify-center mx-auto mb-4;
      }
      .checkmark {
        @apply text-green-500 text-5xl font-bold;
        animation: scaleIn 0.3s ease-out;
      }
      @keyframes scaleIn {
        from {
          transform: scale(0);
        }
        to {
          transform: scale(1);
        }
      }

      /* CSS Modal agar di tengah layar */
      .modal-backdrop {
        position: fixed;
        inset: 0;
        background-color: rgba(15, 23, 42, 0.5); /* Warna slate gelap transparan */
        backdrop-filter: blur(4px);
        z-index: 100; /* Pastikan di atas semua elemen */
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 1rem;
      }

      .modal-content {
        background-color: white;
        border-radius: 1.5rem;
        width: 100%;
        max-width: 28rem; /* Setara max-w-md */
        box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
        animation: popUp 0.3s ease-out;
      }

      @keyframes popUp {
        from {
          opacity: 0;
          transform: scale(0.95);
        }
        to {
          opacity: 1;
          transform: scale(1);
        }
      }

      /* Container Lingkaran Centang */
      .checkmark-circle {
        width: 80px;
        height: 80px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        margin: 0 auto 24px;
        background-color: #ecfdf5; /* green-50 */
        border: 4px solid #10b981; /* green-500 */
        animation: scaleIn 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
      }

      /* Karakter Centang */
      .checkmark {
        color: #10b981;
        font-size: 40px;
        line-height: 1;
        animation: checkAppear 0.3s 0.3s both ease-out;
      }

      /* Efek Muncul Membesar */
      @keyframes scaleIn {
        from {
          transform: scale(0);
          opacity: 0;
        }
        to {
          transform: scale(1);
          opacity: 1;
        }
      }

      /* Efek Centang Muncul dari Bawah */
      @keyframes checkAppear {
        from {
          transform: translateY(10px) scale(0.5);
          opacity: 0;
        }
        to {
          transform: translateY(0) scale(1);
          opacity: 1;
        }
      }

      /* Tambahan: Animasi Modal Masuk */
      .modal-content {
        animation: modalPop 0.3s ease-out;
      }

      @keyframes modalPop {
        from {
          transform: scale(0.9);
          opacity: 0;
        }
        to {
          transform: scale(1);
          opacity: 1;
        }
      }
    </style>
  </head>
  <body class="bg-gray-50 font-sans text-slate-900">
    <nav class="bg-white border-b border-gray-200 sticky top-0 z-40">
      <div class="max-w-7xl mx-auto px-6 h-20 flex items-center justify-between">
        <div class="flex items-center gap-3">
          <div class="w-10 h-10 rounded-full flex items-center justify-center shadow-md">
            <img src="../dabelyu logo.png" alt="Logo" class="w-6 h-6 object-contain" />
          </div>
          <span class="text-xl font-extrabold tracking-tighter">dabelyuland <span class="text-primary text-sm font-bold ml-1">AGENT</span></span>
        </div>
        <div class="flex items-center gap-4">
          <div class="text-right hidden md:block">
            <p class="text-sm font-bold">Budi Properti</p>
            <p class="text-[10px] text-slate-500 uppercase tracking-widest">Verified Agent</p>
          </div>
          <div class="w-10 h-10 bg-slate-200 rounded-full border-2 border-white shadow-sm"></div>
        </div>
      </div>
    </nav>

    <div class="bg-white border-b border-gray-200 sticky top-20 z-30">
      <div class="max-w-7xl mx-auto px-6 flex gap-8">
        <button onclick="switchMenu('list')" id="tab-list" class="py-5 font-bold text-sm transition-all active-tab">Daftar Properti</button>
        <button onclick="window.location.href = 'jual_properti.html'" class="py-5 font-bold text-sm text-slate-400 hover:text-primary transition-all">Upload Properti</button>
      </div>
    </div>

    <main class="max-w-7xl mx-auto px-6 py-8">
      <div id="section-list" class="fade-in space-y-8">
        <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
          <div onclick="setFilter('all')" class="bg-white p-6 rounded-3xl border-2 border-transparent hover:border-primary shadow-sm hover:shadow-md cursor-pointer transition-all group">
            <p class="text-slate-500 text-xs font-bold uppercase mb-2">Semua Properti</p>
            <div class="flex justify-between items-end">
              <h3 id="stat-all" class="text-3xl font-extrabold">0</h3>
              <span class="text-[10px] bg-slate-100 px-2 py-1 rounded-full group-hover:bg-primary/10 group-hover:text-primary transition-colors">Klik untuk memfilter</span>
            </div>
          </div>
          <div onclick="setFilter('Aktif')" class="bg-white p-6 rounded-3xl border-2 border-transparent hover:border-green-500 shadow-sm hover:shadow-md cursor-pointer transition-all group">
            <p class="text-slate-500 text-xs font-bold uppercase mb-2">Properti Aktif</p>
            <div class="flex justify-between items-end">
              <h3 id="stat-active" class="text-3xl font-extrabold text-green-600">0</h3>
              <span class="text-[10px] bg-green-50 text-green-600 px-2 py-1 rounded-full">Live on Site</span>
            </div>
          </div>
          <div onclick="setFilter('Diproses')" class="bg-white p-6 rounded-3xl border-2 border-transparent hover:border-orange-500 shadow-sm hover:shadow-md cursor-pointer transition-all group">
            <p class="text-slate-500 text-xs font-bold uppercase mb-2">Diproses (Pending)</p>
            <div class="flex justify-between items-end">
              <h3 id="stat-pending" class="text-3xl font-extrabold text-orange-500">0</h3>
              <span class="text-[10px] bg-orange-50 text-orange-500 px-2 py-1 rounded-full">Waiting Admin</span>
            </div>
          </div>
        </div>

        <div class="bg-white rounded-3xl shadow-sm border border-gray-100 overflow-hidden">
          <div class="p-6 border-b border-gray-50 flex justify-between items-center bg-gray-50/50">
            <h4 class="font-bold text-slate-800">Manajemen Aset Properti</h4>
            <span id="current-filter-label" class="text-xs font-bold text-primary bg-primary/5 px-3 py-1 rounded-full uppercase tracking-wider">Semua Properti</span>
          </div>
          <div class="overflow-x-auto">
            <table class="w-full text-left border-collapse">
              <thead>
                <tr class="text-[11px] uppercase tracking-widest text-slate-400 border-b border-gray-100">
                  <th class="px-6 py-4 font-bold">Properti</th>
                  <th class="px-6 py-4 font-bold">Harga</th>
                  <th class="px-6 py-4 font-bold">Status</th>
                  <th class="px-6 py-4 font-bold">Submit</th>
                  <th class="px-6 py-4 font-bold text-center">Aksi</th>
                </tr>
              </thead>
              <tbody id="property-table-body" class="text-sm"></tbody>
            </table>
          </div>
        </div>
      </div>

      <div id="section-upload" class="hidden fade-in max-w-3xl mx-auto bg-white p-10 rounded-3xl shadow-sm border border-gray-100">
        <h2 class="text-2xl font-extrabold mb-2">Upload Properti Baru</h2>
        <p class="text-slate-500 mb-8 text-sm">Pastikan data yang diinput sesuai dengan legalitas asli properti.</p>

        <form onsubmit="handleUpload(event)" class="space-y-6">
          <div class="space-y-2">
            <label class="text-xs font-bold uppercase text-slate-700">Judul Properti</label>
            <input type="text" id="up-title" required class="w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-xl focus:ring-2 focus:ring-primary/20 outline-none" placeholder="Contoh: Villa Modern Canggu 3BR" />
          </div>
          <div class="grid grid-cols-2 gap-4">
            <div class="space-y-2">
              <label class="text-xs font-bold uppercase text-slate-700">Harga (Rp)</label>
              <input type="number" id="up-price" required class="w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-xl outline-none" />
            </div>
            <div class="space-y-2">
              <label class="text-xs font-bold uppercase text-slate-700">Kategori</label>
              <select id="up-category" class="w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-xl outline-none">
                <option>Rumah</option>
                <option>Apartemen</option>
                <option>Tanah</option>
              </select>
            </div>
          </div>
          <div class="space-y-2">
            <label class="text-xs font-bold uppercase text-slate-700">Lokasi</label>
            <input type="text" id="up-location" required class="w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-xl outline-none" placeholder="Kota, Wilayah" />
          </div>
          <button type="submit" class="w-full bg-primary text-white font-bold py-4 rounded-2xl shadow-lg shadow-primary/30 hover:bg-primary-dark transition-all">Submit Ke Admin</button>
        </form>
      </div>
    </main>

    <div id="modal-container" class="hidden modal-backdrop">
      <div id="modal-body" class="modal-content"></div>
    </div>

    <script>
      // -- STATE MANAGEMENT --
      let properties = [
        { id: 1, title: "Rumah Minimalis BSD", location: "Tangerang", price: "1.2M", status: "Aktif", date: "20 Jan 2026" },
        { id: 2, title: "Apartemen Sudirman", location: "Jakarta", price: "3.5M", status: "Diproses", date: "25 Jan 2026" },
        { id: 3, title: "Tanah Kavling Bogor", location: "Bogor", price: "800JT", status: "Aktif", date: "15 Jan 2026" },
      ];

      let currentFilter = "all";

      // -- LOGIC: MENU SWITCHING --
      function switchMenu(menu) {
        const listSec = document.getElementById("section-list");
        const uploadSec = document.getElementById("section-upload");
        const tabList = document.getElementById("tab-list");

        if (menu === "list") {
          listSec.classList.remove("hidden");
          uploadSec.classList.add("hidden");
          tabList.classList.add("active-tab");
          renderData();
        } else {
          listSec.classList.add("hidden");
          uploadSec.classList.remove("hidden");
          tabList.classList.remove("active-tab");
        }
      }

      // -- LOGIC: FILTER & STATS --
      function setFilter(filter) {
        currentFilter = filter;
        document.getElementById("current-filter-label").innerText = filter === "all" ? "Semua Properti" : "Properti " + filter;
        renderData();
      }

      function updateStats() {
        document.getElementById("stat-all").innerText = properties.length;
        document.getElementById("stat-active").innerText = properties.filter((p) => p.status === "Aktif").length;
        document.getElementById("stat-pending").innerText = properties.filter((p) => p.status === "Diproses").length;
      }

      // -- LOGIC: RENDER TABLE (READ) --
      function renderData() {
        const tbody = document.getElementById("property-table-body");
        const filtered = currentFilter === "all" ? properties : properties.filter((p) => p.status === currentFilter);

        updateStats();
        tbody.innerHTML = filtered
          .map(
            (p) => `
                <tr class="border-b border-gray-50 hover:bg-gray-50/50 transition-colors group">
                    <td class="px-6 py-5">
                        <p class="font-bold text-slate-800">${p.title}</p>
                        <p class="text-[10px] text-slate-400">${p.location}</p>
                    </td>
                    <td class="px-6 py-5 font-bold text-primary">Rp ${p.price}</td>
                    <td class="px-6 py-5">
                        <span class="px-3 py-1 rounded-full text-[10px] font-bold ${p.status === "Aktif" ? "bg-green-100 text-green-600" : "bg-orange-100 text-orange-600"}">
                            ${p.status}
                        </span>
                    </td>
                    <td class="px-6 py-5 text-slate-500 text-xs">${p.date}</td>
                    <td class="px-6 py-5">
                        <div class="flex justify-center gap-2">
                            <button onclick="showDetail(${p.id})" class="p-2 hover:bg-white rounded-lg border border-transparent hover:border-gray-200 transition-all">üëÅÔ∏è</button>
                            <button onclick="showEdit(${p.id})" class="p-2 hover:bg-white rounded-lg border border-transparent hover:border-gray-200 transition-all">‚úèÔ∏è</button>
                            <button onclick="deleteProp(${p.id})" class="p-2 hover:bg-red-50 text-red-500 rounded-lg transition-all">üóëÔ∏è</button>
                        </div>
                    </td>
                </tr>
            `,
          )
          .join("");
      }

      // -- LOGIC: DETAIL POP-UP (READ DETAIL) --
      function showDetail(id) {
        const p = properties.find((item) => item.id === id);
        openModal(`
                <div class="p-8">
                    <h3 class="text-xl font-extrabold mb-6">Detail Properti</h3>
                    <div class="space-y-4 text-left">
                        <div><p class="text-[10px] font-bold text-slate-400 uppercase">Judul</p><p class="font-bold text-lg text-slate-800">${p.title}</p></div>
                        <div class="grid grid-cols-2 gap-4">
                            <div><p class="text-[10px] font-bold text-slate-400 uppercase">Harga</p><p class="font-bold text-primary">Rp ${p.price}</p></div>
                            <div><p class="text-[10px] font-bold text-slate-400 uppercase">Status</p><p class="font-bold text-slate-700">${p.status}</p></div>
                        </div>
                        <div><p class="text-[10px] font-bold text-slate-400 uppercase">Lokasi</p><p class="font-medium text-slate-600">${p.location}</p></div>
                    </div>
                    <button onclick="closeModal()" class="w-full mt-8 bg-slate-100 py-3 rounded-xl font-bold text-slate-600">Tutup</button>
                </div>
            `);
      }

      // -- LOGIC: EDIT POP-UP (UPDATE) --
      function showEdit(id) {
        const p = properties.find((item) => item.id === id);
        openModal(`
                <div class="p-8 text-left">
                    <h3 class="text-xl font-extrabold mb-6">Edit Properti</h3>
                    <form onsubmit="saveEdit(event, ${p.id})" class="space-y-4">
                        <input type="text" id="edit-title" value="${p.title}" class="w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-xl outline-none focus:ring-2 focus:ring-primary/20">
                        <input type="text" id="edit-price" value="${p.price}" class="w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-xl outline-none focus:ring-2 focus:ring-primary/20">
                        <div class="flex gap-3 pt-4">
                            <button type="button" onclick="closeModal()" class="flex-1 py-3 font-bold text-slate-400">Batal</button>
                            <button type="submit" class="flex-1 bg-primary text-white py-3 rounded-xl font-bold">Simpan Perubahan</button>
                        </div>
                    </form>
                </div>
            `);
      }

      function saveEdit(e, id) {
        e.preventDefault();
        const index = properties.findIndex((p) => p.id === id);
        properties[index].title = document.getElementById("edit-title").value;
        properties[index].price = document.getElementById("edit-price").value;
        renderData();
        showSuccessAlert("properti sudah diedit");
      }

      // -- LOGIC: DELETE POP-UP (DELETE) --
      function deleteProp(id) {
        openModal(`
                <div class="p-8 text-center">
                    <div class="w-16 h-16 bg-red-50 text-red-500 rounded-full flex items-center justify-center mx-auto mb-4 text-2xl">‚ö†Ô∏è</div>
                    <h3 class="text-xl font-extrabold mb-2 text-slate-800">Hapus Properti?</h3>
                    <p class="text-slate-500 text-sm mb-8">Data yang dihapus tidak dapat dikembalikan.</p>
                    <div class="flex gap-3">
                        <button onclick="closeModal()" class="flex-1 py-3 font-bold text-slate-400">Batal</button>
                        <button onclick="confirmDelete(${id})" class="flex-1 bg-red-500 text-white py-3 rounded-xl font-bold">Ya, Hapus</button>
                    </div>
                </div>
            `);
      }

      function confirmDelete(id) {
        properties = properties.filter((p) => p.id !== id);
        renderData();
        showSuccessAlert("properti sudah dihapus");
      }

      // -- SYSTEM: MODAL & ALERT --
      function openModal(content) {
        const container = document.getElementById("modal-container");
        document.getElementById("modal-body").innerHTML = content;
        container.classList.remove("hidden");
      }

      function closeModal() {
        document.getElementById("modal-container").classList.add("hidden");
      }

      function showSuccessAlert(message) {
        openModal(`
                <div class="p-10 text-center">
                    <div class="checkmark-circle">
                        <span class="checkmark">‚úì</span>
                    </div>
                    <h3 class="text-xl font-extrabold mb-2 text-slate-800">Berhasil!</h3>
                    <p class="text-slate-500 text-sm mb-8 font-bold uppercase tracking-widest">${message}</p>
                    <button onclick="closeModal()" class="w-full bg-primary text-white py-4 rounded-2xl font-bold">Lanjutkan</button>
                </div>
            `);
      }

      function handleUpload(e) {
        e.preventDefault();
        const newProp = {
          id: Date.now(),
          title: document.getElementById("up-title").value,
          location: document.getElementById("up-location").value,
          price: (document.getElementById("up-price").value / 1000000).toFixed(1) + "JT",
          status: "Diproses",
          date: "Baru Saja",
        };
        properties.unshift(newProp);
        showSuccessAlert("properti sudah dikirim ke admin");
        switchMenu("list");
        e.target.reset();
      }

      window.onload = renderData;
    </script>
  </body>
</html>
